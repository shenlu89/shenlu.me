<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
    <meta charset=utf-8>
    <meta http-equiv=X-UA-Compatible content="IE=edge">
    <meta name=viewport content="width=device-width,initial-scale=1">
    <meta name="author" content="Shen Lu" />
    <!--[if IE]><link rel="icon" href="/favicon.ico"><![endif]-->
    <title>Shen Lu | R语言吐槽第一弹：等号(=)，还是箭头(<-)</title>
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap" rel="stylesheet">
    <!-- <link rel="stylesheet" href="/media/css/highlight.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/github-gist.min.css">
    <link rel="stylesheet" href="/media/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js"></script>
    <script>
    hljs.initHighlightingOnLoad();
    </script>
    <script type="text/javascript" src="/media/js/jquery-1.7.1.min.js"></script>
</head>

<body>
    <div id="container">
        <div id="main" role="main">
            <nav>
                <span><a title="home page" class="" href="/">HOME</a></span>
                <span><a title="home page" class="" href="/archives">ARCHIVES</a></span>
                <span><a title="categories" class="" href="/categories">CATEGORIES</a></span>
                <span><a title="tags" class="" href="/tags">TAGS</a></span>
                <span><a title="about" class="" href="/about">ABOUT</a></span>
            </nav>
            <article class="content">
                <section class="post">
    <h1 style="text-align: center;">R语言吐槽第一弹：等号(=)，还是箭头(<-)</h1>
    <blockquote>
  <p>The best thing about R is that it was developed by statisticians. The worst thing about R is that…it was developed by statisticians. — Bo Cowgill, Google, Inc</p>
</blockquote>

<p>R语言是我自学的第一门计算机语言，虽然接触最早，但用的最不好。因为R是一个面向统计学的高级语言 (statistics-oriented programming language)，有自己独特的数据类型和语法设计，且在其他语言中难以被借鉴，而且还要记一堆只有在R里才能用到的参数。</p>

<p>比如今天要说的赋值符号。在绝大部分语言里，简单一个等号(=)就完事了，而在R里竟然用箭头符(&lt;-)实现。更可怕的是，在很多场景中等号和箭头可以达到相同的效果，我<del>TM</del>真是服了。最近把概率论和数理统计㕛拾起来了，又要用R了，怒查了一下箭头(&lt;-)和等号(=)在R中的区别，结束个困扰我的问题。</p>

<p>引用R-manual里<a href="https://stat.ethz.ch/R-manual/R-patched/library/base/html/assignOps.html" target="_blank">Assignment Operators</a>对等号和箭头有一段解释。</p>

<blockquote>
  <p>There are three different assignment operators: two of them have leftwards and rightwards forms.</p>
</blockquote>

<blockquote>
  <p>The operators &lt;- and = assign into the environment in which they are evaluated. The operator &lt;- can be used anywhere, whereas the operator = is only allowed at the top level (e.g., in the complete expression typed at the command prompt) or as one of the subexpressions in a braced list of expressions.</p>
</blockquote>

<p>根据我的理解，通俗的解释一下上面这段话的意思。</p>

<h3 id="1-赋值和传参">1. 赋值和传参：</h3>

<p>在大多数编程语言中，等号(=)的作用有两个：赋值和传参。等号(=)可以作为赋值变量的工具，也可在函数(Function)中发挥传递参数的作用。比如：</p>

<pre><code class="language-r">&gt; a = 2 #变量赋值
&gt; a
[1] 2
&gt; read.table("fileName", header = TRUE) #传递参数
</code></pre>

<p>但箭头就不是这样了，它只有一个功能，赋值。假设所有的情况下，只用等号(=)。那么在作用域中，等号(=)就是赋值，但在函数方程中设置参数时，等号(=)的作用又变成了传参。而如果你在设置参数的时候使用了箭头(&lt;-)，那么你会发现在全局变量里，会多出一个和参数名相同的赋值的变量，占用命名空间，导致歧义和出错的可能。比如：</p>

<pre><code class="language-r">&gt; b &lt;- 2 #变量赋值
&gt; b
[1] 2
&gt; read.table("fileName", header &lt;- TRUE) #变量赋值
&gt; header
[1] TRUE
</code></pre>

<h3 id="2方向性">2.方向性</h3>

<p>但是箭头(&lt;-)也不是一无是处。它有一个等号(=)不具备的能力：双向赋值。既然是箭头，那就一定有方向。在R语言中，箭头符号不但可以像等号一样向左赋值，而且向右也可以赋值。比如：</p>

<pre><code class="language-r">&gt; b &lt;- 2 #变量赋值
&gt; b
[1] 2
&gt; 3 -&gt; a #变量赋值
&gt; a
[1] 3
</code></pre>

<p>这个功能，我感觉没啥卵用，不利于代码的阅读和维护，但是设计者这么设计一定有他的道理，反正我搞不懂。</p>

<h3 id="3-优先级">3. 优先级</h3>

<p>当等号与箭头同时存在的时候，&lt;-的优先级=要高于等号，例如连续赋值时</p>

<pre><code class="language-r">x = y = 5
x &lt;- y &lt;- 5
&gt; x
[1] 5
&gt; y
[1] 5
</code></pre>

<p>但如果混用，搞不清赋值的优先级，就会出现问题：</p>

<pre><code class="language-r">x &lt;- y = 5 // Error in (x &lt;- y) = 5 : object 'x' not found
x = y &lt;- 5
&gt; x
[1] 5
&gt; y
[1] 5
</code></pre>

<p>上面的代码报错，原因是如果先使用箭头(&lt;-)，后使用等号(=)，箭头(&lt;-)会先得到解析，轮到等号(=)的时候就找不到要赋值的对象了。</p>

<p>所以R赋值最好还是用箭头(&lt;-)。好吧，到此为止，应该够用了。</p>

</section>
<section class="meta">
    <br />
    <br />
    <span>
        <a   class="pageNavInvalid" >上一篇</a>
        &nbsp;&nbsp;&nbsp;
        <a  href="http://localhost:4000/what-is-web" class="pageNav"  >下一篇</a>
    </span>
    <hr>
    <span class="author">
        <a href="/about/">Shen Lu</a>
    </span>
    <span class="time">
        /
        <time datetime="2019-09-22">2019-09-22</time>
    </span>
    <br />
    <span class="license">
        Published under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">(CC) BY-NC-SA</a>
    </span>
    
    <span class="categories">
        in categories
        
        <a href="/categories/#Blatter" title="Blatter">Blatter</a>&nbsp;
        
    </span>
    
    
    <span class="tags">
        tagged with
        
        <a href="/tags/#R" title="R">R</a>&nbsp;
        
    </span>
    
</section>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
>
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://vincenttam.github.io/javascripts/MathJaxLocal.js"
>
</script>

            </article>
        </div>
        <footer>
            <p><small>Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a> | © 2019-2020 by <a href="/about/" target="_blank">Shen Lu</a></small></p>
        </footer>
    </div>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-70772442-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-70772442-1');
    </script>
    <!-- End Google Analytics -->
</body>

</html>