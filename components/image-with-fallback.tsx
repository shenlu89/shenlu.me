"use client";
import Image from "next/image";
import { useState } from "react";

export default function ImageWithFallback({ src, alt, ...props }: any) {
  const [srcUrl, setSrcUrl] = useState(src);

  return (
    <Image
      {...props}
      alt={alt}
      src={srcUrl}
      placeholder="blur"
      blurDataURL="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgJy0vL1czQy8vRFREIFNWRyAyMDAxMDkwNC8vRU4nICdodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCc+Cjxzdmcgd2lkdGg9Ijc1MnB0IiBoZWlnaHQ9Ijc1MnB0IiB2ZXJzaW9uPSIxLjAiIHZpZXdCb3g9IjAgMCA3NTIgNzUyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgNzUyKSBzY2FsZSguMSAtLjEpIj4KICAgIDxwYXRoCiAgICAgIGQ9Im0yODk3IDU0MjZjLTc0Ni0xNjctMTM1OS0zMDUtMTM2MS0zMDctNC00IDU5MS0yNzQwIDU5OC0yNzQ2IDUtNiA3MjAgMTQ4IDcyOSAxNTcgNSA0IDExIDI2IDE0IDQ5IDQgMzAgMiA0MS04IDQxLTcgMC0xNTktMzItMzM3LTcxcy0zMjYtNjgtMzI5LTY2Yy0xMCAxMC01NzEgMjU2Mi01NjUgMjU2OCAxMCA4IDI1NzEgNTczIDI1NzYgNTY4IDEtMiA0MC0xNjggODUtMzY5czg2LTM3NSA5MS0zODdjOC0xOSAxOC0yMyA1MC0yMyAyMiAwIDQwIDEgNDAgMy0xIDEtNDUgMjAwLTk4IDQ0Mi03MyAzMzItMTAxIDQ0MC0xMTIgNDQyLTggMS02MjYtMTM1LTEzNzMtMzAxeiIgLz4KICAgIDxwYXRoCiAgICAgIGQ9Im0zMTc5IDQ4NjhjLTItNy0yNzctMjgwMy0yNzYtMjgwNCA2LTUgMjgwMS0yNzQgMjgxMC0yNzEgNyAyIDU5IDQ4NSAxNDkgMTQwMiA3NSA3NzAgMTM2IDE0MDAgMTM0IDE0MDItMyA0LTI3NTUgMjczLTI3ODkgMjczLTE1IDAtMjctMS0yOC0yem0xMTIxLTE5M2MxNDA5LTEzNiAxNTkzLTE1NCAxNTk3LTE1OCA2LTctMjEyLTIyMDctMjE5LTIyMDUtMyAyLTE1MiAxODEtMzMxIDQwMGwtMzI0IDM5Ni0xNzgtMTQ0Yy05OC03OS0xODItMTQ0LTE4Ni0xNDRzLTE0OCAxNjktMzE5IDM3NS0zMTYgMzczLTMyMSAzNzBjLTUtNC0yMjEtMTgyLTQ4MC0zOTYtMjYwLTIxNC00NzMtMzg4LTQ3NS0zODYtNCAzIDE4NCAxOTM3IDE5MSAxOTczIDQgMTYgMTEgMjAgMzIgMTcgMTYtMiA0NzEtNDYgMTAxMy05OHoiIC8+CiAgICA8cGF0aAogICAgICBkPSJtNTExNSA0MjE3Yy0xMTItMzgtMjAwLTExNC0yNDktMjE3LTI5LTYwLTMxLTczLTMxLTE3MHMyLTExMCAzMi0xNzNjMTQ1LTMwNiA1ODEtMzA2IDcyNiAwIDMwIDYzIDMyIDc2IDMyIDE3M3MtMiAxMTAtMzEgMTcwYy0zOSA4NC0xMTEgMTU1LTE5NCAxOTQtNTUgMjUtNzkgMzEtMTU1IDMzLTU1IDItMTA1LTItMTMwLTEweiIgLz4KICA8L2c+Cjwvc3ZnPg=="
      onError={() => setSrcUrl("/image-placeholder.svg")}
      priority={true}
    />
  );
}
