<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="shortcut icon" href="/assets/icon/logo.svg">
  <title>Shen Lu's Blog</title>
  <link rel="preload" href="/assets/css/fonts/cantarell-extrabold.woff2" as="font" type="font/woff2" crossorigin="anonymous"/>
  <link rel="preload" href="/assets/css/fonts/cantarell-bold.woff2" as="font" type="font/woff2" crossorigin="anonymous"/>
  <link rel="preload" href="/assets/css/fonts/cantarell-regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/>
  <link rel="preload" href="/assets/css/fonts/cantarell-thin.woff2" as="font" type="font/woff2" crossorigin="anonymous"/>
  <link rel="preload" href="/assets/css/fonts/cantarell-light.woff2" as="font" type="font/woff2" crossorigin="anonymous"/>
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" async href="/assets/css/syntax.css" />
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>2019开始学习C语言 | Shen Lu’s Blog</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="2019开始学习C语言" />
<meta name="author" content="shenlu89" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="最近终于有点时间了，打算认真学一些C语言。C代码需要先编译成一个二进制的可执行文件才能运行，于是按照VS Code的官方教程配置了C/C++的相关环境。编程，调试和输出结果一步到位，让学习过程更高效一些。" />
<meta property="og:description" content="最近终于有点时间了，打算认真学一些C语言。C代码需要先编译成一个二进制的可执行文件才能运行，于是按照VS Code的官方教程配置了C/C++的相关环境。编程，调试和输出结果一步到位，让学习过程更高效一些。" />
<link rel="canonical" href="https://shenlu89.github.io/2019/09/15/learning-c.html" />
<meta property="og:url" content="https://shenlu89.github.io/2019/09/15/learning-c.html" />
<meta property="og:site_name" content="Shen Lu’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-09-15T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="2019开始学习C语言" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"2019开始学习C语言","dateModified":"2019-09-15T00:00:00+00:00","datePublished":"2019-09-15T00:00:00+00:00","url":"https://shenlu89.github.io/2019/09/15/learning-c.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://shenlu89.github.io/2019/09/15/learning-c.html"},"author":{"@type":"Person","name":"shenlu89"},"description":"最近终于有点时间了，打算认真学一些C语言。C代码需要先编译成一个二进制的可执行文件才能运行，于是按照VS Code的官方教程配置了C/C++的相关环境。编程，调试和输出结果一步到位，让学习过程更高效一些。","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2400772928756044" crossorigin="anonymous"></script>

</head>

  <body>
    <div class="container max-w-3xl mx-auto px-6 lg:px-0">
      <header>
  <nav
    class="flex flex-col sm:flex-row justify-between sm:pb-8 pt-8 sm:pt-8"
    role="navigation"
  >
    <a
      href="/"
      title=""
      class="flex mt-2 sm:mt-0 space-x-2 items-center self-center no-underline hover:no-underline"
    >
      <img src="/assets/icon/logo.svg" class="w-9, h-9">
      <h1 class="link-pill text-gray-900 text-2xl font-extrabold">Shen Lu's Blog</h1>
    </a>
    <ul class="flex mt-8 sm:mt-0 space-x-4 items-center self-center">
      
      <li>
        <a
          href="/articles"
          title="the list of essays in the order of years"
          class="capitalize py-1 text-blue-500 hover:text-blue-700 no-underline hover:underline"
          >articles</a
        >
      </li>
      
      <li>
        <a
          href="/products"
          title="including my open source projects and publications"
          class="capitalize py-1 text-blue-500 hover:text-blue-700 no-underline hover:underline"
          >products</a
        >
      </li>
      
      <li>
        <a
          href="/about"
          title="about me"
          class="capitalize py-1 text-blue-500 hover:text-blue-700 no-underline hover:underline"
          >about</a
        >
      </li>
      
    </ul>
  </nav>
</header>

      <article class="w-full max-w-none py-8">
  <head>
    <h1 class="font-extrabold leading-tight text-2xl text-gray-900 mb-4">
      2019开始学习C语言
    </h1>
    <time class="text-gray-500 text-sm">
      Posted on Sep 15, 2019
    </time>
  </head>
  <div class="prose mt-4 max-w-none leading-6">
    
    <div class="mt-4 text-justify"><p>最近终于有点时间了，打算认真学一些C语言。C代码需要先编译成一个二进制的可执行文件才能运行，于是按照VS Code的官方<a href="https://code.visualstudio.com/docs/cpp/config-linux" target="_blank">教程</a>配置了C/C++的相关环境。编程，调试和输出结果一步到位，让学习过程更高效一些。</p>

<p>打算从<a href="https://en.wikipedia.org/wiki/The_C_Programming_Language" target="_blank">《The C Programming Language》</a>开始入门，照着书敲了第一章的第一个例子<code class="language-plaintext highlighter-rouge">hello.c</code>代码，结果报错了。</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;stdio.h&gt; // include information about standard library
</span>
<span class="n">main</span><span class="p">()</span> <span class="c1">// define a Junction named main that receives no argument values</span>
<span class="p">{</span> <span class="c1">// statements oj mainare enclosed in braces</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"hello, world</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span> <span class="c1">// maincalls libraryJunction printf to print this sequence of characters; \n represents the newline character</span>
<span class="p">}</span>
</code></pre></div></div>

<p>下面执行<code class="language-plaintext highlighter-rouge">cc hello.c</code>编译，看到报错内容为</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hello.c:3:1: warning: return type defaults to ‘int’ [-Wimplicit-int]
 main()
 ^~~~
</code></pre></div></div>

<p>原因是从C99标准开始，<code class="language-plaintext highlighter-rouge">no type specifiers</code>被移除了。这本书里用的是是C89标准，具体详见<a href="http://port70.net/~nsz/c/c89/c89-draft.html#3.5.2" target="_blank">The C89 Draft
- 3.5.2 Type specifiers</a></p>

<p>好吧，现在查询一下<code class="language-plaintext highlighter-rouge">cc</code>用的是哪个标准，执行如下命令，可查看<code class="language-plaintext highlighter-rouge">cc</code>默认定义的预编译宏：</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cc <span class="nt">-E</span> <span class="nt">-dM</span> - &lt;/dev/null | <span class="nb">grep</span> <span class="s2">"STDC_VERSION"</span>
<span class="c">#define __STDC_VERSION__ 201112L</span>
</code></pre></div></div>

<p>当前的计算机是<code class="language-plaintext highlighter-rouge">Ubuntu18.04</code>，默认使用的是C11标准。</p>

<blockquote>
  <p>熟知的C标准大概有三种: c90( or c89), c99, c11. 分别于1990年, 1999年, 2011年发布。原来的ANSI C标准(X3.159-1989)在1989年获得批准, 并在1990年发布. 之后(1990年)被批准为ISO标准(ISO/IEC 9899:1990). C89和C90在技术上没有区别。</p>
</blockquote>

<p>好吧，开始解决问题，上面的代码要正常工作，有两个方案:</p>

<p><strong>１．按照C11标准修改代码</strong></p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;stdio.h&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"hello, world</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>就可以正常输出了。</p>

<p><strong>2. 使用C89或C90标准</strong></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cc <span class="nt">-std</span><span class="o">=</span>c89 hello.c // 或者cc <span class="nt">-std</span><span class="o">=</span>c90 hello.c
</code></pre></div></div>

<p>也可以正常输出了。</p>

<p>补充材料：<a href="https://stackoverflow.com/questions/1516609/difference-between-cc-gcc-and-g">Difference between CC, gcc and g++?</a></p>

<p>在Linux操作系统中<code class="language-plaintext highlighter-rouge">cc</code>通过软连接，链接到<code class="language-plaintext highlighter-rouge">gcc</code>的。所以在Linux使用<code class="language-plaintext highlighter-rouge">cc</code>和<code class="language-plaintext highlighter-rouge">gcc</code>效果是一样的。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>which cc gcc
/usr/bin/cc
/usr/bin/gcc

<span class="nb">realpath</span> /usr/bin/cc /usr/bin/gcc //　软链接指向的最终源文件
/usr/bin/x86_64-linux-gnu-gcc-7
/usr/bin/x86_64-linux-gnu-gcc-7
</code></pre></div></div>

<p>写一个<code class="language-plaintext highlighter-rouge">Hello, World</code>好累。</p>

<!-- ### C语言基本类型

下面列出了C语言中所有的基本类型和所占字节数。

```c
#include <stdio.h>

int main()
{  
    int char_length = sizeof(char);
    int unsigned_char_length = sizeof(unsigned char);
    int signed_char_length = sizeof(signed char);
    int int_length = sizeof(int);
    int unsigned_int_length = sizeof(unsigned int);
    int short_length = sizeof(short);
    int unsigned_short_length = sizeof(unsigned short);
    int long_length = sizeof(long);
    int unsigned_long_length = sizeof(unsigned long);
   
    printf("char=%d\nunsigned char=%d\nsigned char=%d\nint=%d\nunsigned int=%d\nshort=%d\nunsigned short=%d\nlong=%d\nunsigned long=%d\n", char_length, unsigned_char_length, signed_char_length, int_length, unsigned_int_length, short_length, unsigned_short_length, long_length, unsigned_long_length);
   
    return 0;
}
```
>`sizeof`计算数据类型或变量长度，即所占字节数(Bytes)。 -->

<p><strong>参考文献：</strong></p>

<ul>
  <li>[1] <a href="https://www.runoob.com/cprogramming/c-tutorial.html" target="_blank">C 语言教程</a></li>
  <li>[2] <a href="https://clc-wiki.net/wiki/K&amp;R2_solutions" target="_blank">K&amp;R2 solutions</a></li>
</ul>
</div>
  </div>
</article>
<script id="dsq-count-scr" src="//shenlu89.disqus.com/count.js" async></script>
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.url = "https://shenlu89.github.io/2019/09/15/learning-c.html";  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = "/2019/09/15/learning-c"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://shenlu89.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            

      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2400772928756044"
     crossorigin="anonymous"></script>
<!-- bottom_ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2400772928756044"
     data-ad-slot="9565985015"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      <footer class="p-8">
  <div class="container max-w-2xl mx-auto">
    <div class="mb-4">
      <ul class="flex flex-wrap leading-loose text-sm justify-center">
      
        <li class="mr-4">
          <a
            href="https://github.com/shenlu89/jekyll-tailwindcss-starter"
            class="hover:underline text-gray-600 no-underline hover:text-gray-800"
            target="_blank"
            >Github</a
          >
        </li>
        
        <li class="mr-4">
          <a
            href="mailto:shenlu89dev@gmail.com"
            class="hover:underline text-gray-600 no-underline hover:text-gray-800"
            target="_blank"
            >Email</a
          >
        </li>
        
        <li class="mr-4">
          <a
            href="https://www.buymeacoffee.com/shenlu89"
            class="hover:underline text-gray-600 no-underline hover:text-gray-800"
            target="_blank"
            >Buy Me A Coffee</a
          >
        </li>
        
      </ul>
    </div>
    <p class="leading-snug text-gray-600 text-xs text-center">
      © 2021 All rights reserved by
      <a href="http://github.com/shenlu89" class="text-gray-600 hover:text-gray-800 no-underline hover:underline">Shen Lu</a>
    </p>
  </div>
</footer>

      <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-70772442-1', 'auto');
  ga('send', 'pageview');
</script>

    </div>
  </body>
</html>
